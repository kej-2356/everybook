<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	  layout:decorator="@{layout/defaultAdmin}">

<th:block layout:fragment="customTitle">
	<title>직원 등록</title>
</th:block>

<th:block layout:fragment="customCss">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
</th:block>

<th:block layout:fragment="customContents">
	<!-- Content Wrapper. Contains page content -->
	<div class="content-wrapper">
		<!-- Content Header (Page header) -->
	 	<!-- Main content -->
	<section class="content">			
	  <div class="register-logo">
	    <b>직원 등록</b>
	  </div>
	  <div class="card" style="margin-left: 150px; margin-right: 150px">
	    <div class="card-body register-card-body" style="margin-left: 30px; margin-right: 30px">
	      <p class="login-box-msg">Register a new officer</p>
	
	      <form action="/addOfficer" method="post">
	       <label for="inputPassword3" class="col-sm-2 col-form-label">아이디</label>
	        <div class="input-group mb-1">
	          <input type="text" class="form-control" readonly="readonly" style="background-color: snow" th:value="${officerId.officerId}" name="officerId">
	          <div class="input-group-append">
	            <div class="input-group-text">
	              <span class="fas fa-user"></span>
	            </div>
	          </div>
	        </div>
	       <label for="inputPassword3" class="col-sm-2 col-form-label">패스워드</label>
	        <div class="input-group mb-1">
	          <input type="password" class="form-control" placeholder="Officer Password" name="officerPw" id="officerPw">
	          <div class="input-group-append">
	            <div class="input-group-text">
	              <span class="fas fa-lock"></span>
	            </div>
	          </div>
	        </div>
	       <label for="inputPassword3" class="col-sm-2 col-form-label">성명</label>
	        <div class="input-group mb-1">
	          <input type="text" class="form-control" placeholder="Officer Name" name="officerName" id="officerName">
	          <div class="input-group-append">
	            <div class="input-group-text">
	              <span class="fas fa-user"></span>
	            </div>
	          </div>
	        </div>
	       <label for="inputPassword3" class="col-sm-2 col-form-label">생년월일</label>                
	        <div class="input-group mb-4">
	          <input type="text" class="form-control" placeholder="YYYY-MM-dd" name="officerBirth" id="officerBirth">
	          <div class="input-group-append">
	           <div class="input-group-text">
	              <span class="fas fa-user"></span>
	            </div>
	          </div>
	        </div>
	        <div class="row" style="text-align: center">
		       <label for="inputPassword3" class="col-sm-2 col-form-label">레벨코드</label>                
		        <div class="input-group mb-1 col-sm-3">
		        	<select class="form-control" name="level" id="level">
		        		<option value="">선택</option>
		        		<option value="1">관리자</option>
		        		<option value="2">사서직</option>
		        		<option value="3">회계직</option>
		        	</select>
		           <div class="input-group-append">
		            <div class="input-group-text">
		            </div>
		          </div>
		        </div>
		        
		       <label for="inputPassword3" class="col-sm-2 col-form-label offset-1">도서관코드</label>                
		        <div class="input-group mb-1 col-sm-4">
		        	<input class="form-control" type="search" placeholder="Library" name="library" id="libraryCodeResult" readonly="readonly" style="background-color: snow">
                    <button type="button" class="btn btn-default" id="librarySerch"><i class="fas fa-search"></i></button> 
                </div>
	        </div>
		       <label for="inputPassword3" class="col-sm-2 col-form-label">주소</label>                
		        <div class="input-group mb-1">
		          <input type="text" class="form-control" placeholder="Officer Address" name="officerAddress" id="officerAddress">
		          <div class="input-group-append">
		            <div class="input-group-text">
		              <span class="fas fa-envelope"></span>
		            </div>
		          </div>
		        </div>
		       <label for="inputPassword3" class="col-sm-2 col-form-label">전화번호</label>                
		        <div class="input-group mb-1">
		          <input type="text" class="form-control" placeholder="000-0000-0000" name="officerTel" id="officerTel">
		          <div class="input-group-append">
		            <div class="input-group-text">
		              <span class="fas fa-envelope"></span>
		            </div>
		          </div>
		        </div>
		       <label for="inputPassword3" class="col-sm-2 col-form-label">이메일</label>                
		        <div class="input-group mb-1">
		          <input type="text" class="form-control" placeholder="Officer Email" name="officerEmail" id="officerEmail">
		          <div class="input-group-append">
		            <div class="input-group-text">
		              <span class="fas fa-envelope"></span>
		            </div>
		          </div>
		        </div>
		        <!-- row -->
		        <div class="row">
		          <div class="col-md-3 offset-3" style="text-align: center; color: white">
		            <a href="javascript:history.back();" class="btn btn-primary btn-block" >뒤로가기(서)</a>
		          </div>
		            <div class="social-auth-links text-center">
		        
		      </div>
		          <div class="col-md-3" style="text-align: center">
		            <button type="submit" class="btn btn-danger btn-block" id="officerInsert">등록하기(서)</button>
		          </div>			
	        </div>
	          <!-- /.row -->
	      </form>			
	          <!-- librarySerchModal -->
	          <div class="modal fade" id="librarySerchModal">
		        <div class="modal-dialog">
		          <div class="modal-content bg-default">
		            <div class="modal-header">
		              <h4 class="modal-title">Library Search</h4>
		              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		                <span aria-hidden="true">&times;</span></button>
		            </div>
		            <div class="modal-body">
		              <p style="text-align: center;">도서관 이름으로 검색하세요. <small style="margin-left: 10px">ex)제주도서관</small></p>
		              <div>
		            <label style="margin-top: 10px">도서관 이름</label>
			            <input type="text" id="libraryNameSk" style="margin-left: 7px; width: 250px; text-align: center; background-color: Snow; border: ridge;">
			            <button type="button" id="LibraryCodeSearch" style="background-color: snow; border: outset;">Search</button>
		            </div>
		            <label style="margin-top: 10px">도서관 코드</label>
			            <input type="text" id="libraryCode" style="margin-left: 7px; width: 250px; text-align: center; background-color: Snow; border: ridge;">
		            </div>
		            <div class="modal-footer justify-content-between">
		              <button type="button" class="btn" data-dismiss="modal" style="background-color: Snow; border: outset;">Close</button>
		              <button type="submit" class="btn" id="libraryCodeInsert" style="background-color: Snow; border: outset;">OK</button>
		            </div>
		          </div>
		          <!-- /.modal-content -->
		        </div>
		        <!-- /.modal-dialog -->
      		</div>
     			<!-- /.librarySerchModal -->
	    </div><!-- /.card-body -->
	  </div><!-- /.card -->
	</section>
		<!-- /.content -->
</div>
	<!-- /.content-wrapper -->
</th:block>
<th:block layout:fragment="customFooterScript">
<script>
	$(function (){
		//직원등록 유효성 검사
		$('#officerInsert').click(function(){	
			var officerId = $('#officerId');
			var officerPw = $('#officerPw');
			var officerName = $('#officerName');
			var officerBirth = $('#officerBirth');
			var level = $('#level');
			var library = $('#library');
			var officerAddress = $('#officerAddress');
			var	officerTel = $('#officerTel');
			var officerEmail = $('#officerEmail');

		 if(officerPw.val() == ""){
		        alert("비밀번호를 입력하세요");
		        officerPw.focus();
		        return false;
		      }
		 if(officerName.val() == ""){
		        alert("이름을 입력하세요");
		        officerName.focus();
		        return false;
		      }
		 if(officerBirth.val() == ""){
		        alert("생년월일을 입력하세요");
		        officerBirth.focus();
		        return false;
		      }
		 if(level.val() == ""){
		        alert("레벨을 입력하세요");
		        level.focus();
		        return false;
		      }
		 if(library.val() == ""){
		        alert("도서관코드를 입력하세요");
		        library.focus();
		        return false;
		      }
		 if(officerAddress.val() == ""){
		        alert("주소를 입력하세요");
		        officerAddress.focus();
		        return false;
		      }
		 if(officerTel.val() == ""){
		        alert("전화번호를 입력하세요");
		        officerTel.focus();
		        return false;
		      }
		 if(officerEmail.val() == ""){
		        alert("이메일을 입력하세요");
		        officerEmail.focus();
		        return false;
		      }
		});	
		
		//도서관 코드 검색 모달창
		$('#librarySerch').click(function(){
			console.log("도서관 검색버튼 클릭");
			$('#librarySerchModal').modal();
		})
		
		//도서관 이름으로 도서관코드 검색
		$('#LibraryCodeSearch').click(function(){
			console.log("도서이름 검색버튼 클릭");
			var value = $('#libraryNameSk').val();
			console.log(value);
			var request = $.ajax({
	  			  url: "/libraryCodeSearch",
	  			  method: "post",
	  			  data: { "libraryNameSk" : value },
	  			  dataType: "json"
	  			});	  			 
	  			request.done(function( data ) {
	  				console.log(data);	  				
					$('#libraryNameSk').val(value);
	  				$('#libraryCode').val(data.libraryCode);	  				
	  			});	  			 
	  			request.fail(function( jqXHR, textStatus ) {
	  			  alert( "Request failed: " + textStatus );
	  			});
		});
		//도서관 코드검색 모달 창 OK버튼 클릭 시 코드값 폼으로 가져오기
		$('#libraryCodeInsert').click(function(){
			console.log("libraryCodeInsert 클릭");
			var libraryCode = $('#libraryCode').val();
			console.log(libraryCode + " <-- libraryCode")
			$('#libraryCodeResult').val(libraryCode);
			$('#librarySerchModal').modal('hide');
		})
	})
	</script>
</th:block>
</html>